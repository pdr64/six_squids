
<!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title> Lab 2</title>
    <style>
      body{
        padding: 0 80px;
      }
    </style>
</head>
<body>
  <div id= "header">
    <center><h1> Lab 2 - Frequency Analysis</h1></center>
  </div>
  <div id = "navbar">
    <a href="https://pdr64.github.io/six_squids/"><button class="btn"><i class="fa fa-home"></i> Back to Home Page</button></a>
  </div>
  <br>
  <br>
  <center><h2>Objective </h2></center>
  <p>The goal of this lab was to start testing different signal processing, both audio and optical. The audio team worked on processing
     certain frequencies and ignoring others (like voice and music) whereas the optical team worked on detecting other robots' IR emitters and 
     ignoring the decoy frequencies. 
  </p>
  <br>
  <h2>Sub Teams</h2>
  <span><h3>Optical Team</h3>
    <ul><li> Katie</li>
      <li> Ben</li></ul></span> 
  <span><h3>Acoustic Team</h3>
    <ul><li> Caroline</li>
      <li> Pablo</li></ul></span>
  <br>
  <h2>Materials Used - Optical Team</h2>
  <ul><li>1 Arduino Uno</li>
    <li>1 USB A/B Cable</li>
    <li>1 IR hat from TAs</li>
    <li>1 IR sensor  (OP598)</li>
    <li>1 Decoy</li>
    <li>Resistors and capacitors for bandpass filter</li>
    <li>1 solderless breadboard</li>
  </ul>
  <br>
  <h2>Materials Used - Acoustic Team</h2>
  <ul>
    <li>1 Arduino Uno</li>
    <li>1 USB A/B Cable</li>   
    <li>1 Microphone</li>
    <li>Resistors and capacitor for amplifier circuit</li> 
    <li>1 solderless breadboard</li>       
  </ul>
  <br>
  <center><h2>Procedure</h2></center>
  <br>
  <h3>Optical Team - Detecting IR Hats</h3>
  <p>
    First, the optical team attempted to detect IR emitters on "hats" given to us by the TAs. The emit IR light at 6kHz, which is not 
    visible to humans but can be read by our IR sensor (OP598). The IR sensor was hooked up as seen below (taken from the 3400 site)</p>
  <br>
  <center><img src="IRsensor.png" class="img-rounded" alt="Circuit Diagram" width="400" height="300"></center><br>
  <p>We used the Arduino library Open Music Labsâ€™ FFT to analyze all the input 
    from the sensor, and tried to detect a peak at the desired frequency. First we made sure we could see the peak on the oscilliscope,
    as seen below.</p>
  <br>
  <center><iframe width="560" height="315" src="https://www.youtube.com/embed/XtczPIGM19o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></center>

  <p>
  Next we implemented an op amp based on Team Alpha's solution from last year as recommended by the TAs after we could 
  not get our personally designed op-amp circuit working. 
  <center><img src="team_alpha_amp.png" class="img-rounded" alt="Amplifier Circuit" width="600" height="300"></center><br>
  </p>
  <br>
  <p>
   After this we returned to the FFT library, where we were successfully able to identify the 6kHz bucket in the 42nd group, 
    which the decoy hat had no affect on due to the spacing of the buckets. Below you can see our FFT analysis, where the 42nd 
    bucket is clearly high in the presense of the hat and low without it. 
    </p>
  <center><img src="IR_Sensing.PNG" class="img-rounded" alt="IR sensing FFT" width="300" height="500"></center><br>
   
  <p>
    Therefore, the visual task was complete. See below for a 
    video of Gary responding to the robot hat and not to the decoy! 
  </p>
  <br>
  <h3>Acoutic Team - Detecting 660Hz Sound frequency</h3>
  <p>We began with the circuit provided for the lab but realised that we needed to amplify our waveforms because they had been attenuated.
    We began the task independently trying to build a circuit to detect our 660Hz sound wave. We worked hard switching between numerous designs of
    band-pass filters to amplifiers but nothing seemed to work for us. We decided to resort to Team Alpha's approach. The values of our components are however
    a bit different from the one used by Team Alpha. 
  </p>
  <br>
  <h3> Merging the Two Functionalities</h3>
  <p>Merging the two sub groups was not too difficult because both teams used the same example code. To implement both functionalities, we created two new 
    functions, fft_audio and fft_visual. Each function copied the functional part from the FFT and adapted it to work with the specific component. From there, 
    inside loop, we alternated between calling fft_audio and fft_visual. This allowed both functions to work together at the same time. For the final competition, 
    though, we will only need fft_audio for the very beginning so we will likely use an if statement to address this.
  </p>
  <a href="#header"><button class="btn"><i class="fa fa-arrow-up"></i>Return to top</button></a>
  </body>
</html>
